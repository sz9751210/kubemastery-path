---
id: 104
title: OCI & Low-Level Runtimes
category: INTERNALS
duration: 60 mins
---

# OCI & RunC: How a Container Starts

When you ask K8s to run a Pod, `kubelet` calls the CRI (e.g., `containerd`). But what does `containerd` do?

## The OCI (Open Container Initiative)
It defines two specs:
1.  **Image Spec**: How the filesystem and metadata are bundled.
2.  **Runtime Spec**: `config.json` that defines *how* to run it (namespaces, cgroups, commands).

## The Flow
`Kubelet` -> `CRI (containerd)` -> `Shim (containerd-shim)` -> `OCI Runtime (runc)` -> `Kernel`.

### What is runc?
It is a CLI tool for spawning and running containers according to the OCI spec. It interacts directly with Linux kernel features like:
-   **unshare**: To create namespaces.
-   **cgroups**: To set limits.
-   **pivot_root**: To change the root filesystem.

```bash
# You can run a container manually with runc!
mkdir -p mycontainer/rootfs
# Export a docker image to rootfs...
runc spec # Generates config.json
runc run mycontainer
```
