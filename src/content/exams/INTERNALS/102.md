---
id: 102
title: Etcd & Raft Consensus
category: INTERNALS
duration: 60 mins
---

# Etcd & The Raft Consensus Algorithm

How does Kubernetes maintain a consistent state across multiple control plane nodes? It relies entirely on **Etcd**.

## What is Etcd?
Etcd is a distributed, reliable key-value store. It is the "source of truth" for Kubernetes.

## The Raft Algorithm
Etcd uses **Raft** to achieve consensus.
1.  **Leader Election**: One node is elected leader. All writes go to the leader.
2.  **Log Replication**: The leader replicates the entry to followers.
3.  **Commit**: Once a majority (Quorum) acknowledges the entry, it is committed.

### Quorum
$N/2 + 1$. For a 3-node cluster, you need 2 nodes to agree.
-   **3 Nodes**: Tolerate 1 failure.
-   **5 Nodes**: Tolerate 2 failures.

```bash
# Check endpoint health
ETCDCTL_API=3 etcdctl endpoint health
```
